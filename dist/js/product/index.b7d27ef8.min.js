webpackJsonp([15],{

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(60);


/***/ }),

/***/ 26:
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var user = __webpack_require__(27)
	    , _user = user._user
	    , _f = user._f;

	// 导航
	var nav = {
	    init: function () {

	        this.bindEvent();
	        this.loadUserInfo();
	        this.loginTimeout();

	        return this;
	    },
	    loginTimeout: function () {
	        //登录超时20分钟
	        var setout = 20 * 60 * 1000;
	        var myTime = setTimeout(function () { timeOut(); }, setout);
	        top.layerout = {};
	        top.layerout.resetTime = function () {
	            clearTimeout(myTime);
	            myTime = setTimeout(function () { timeOut(); }, setout);
	        }

	        function timeOut() {
	            _user.logout();
	            alert('您已超时 请重新登录')
	            //window.location.reload();
	        }

	        $(document).off();

	        $(document).keydown(function (event) {
	            top.layerout.resetTime();
	        }).click(function (event) {
	            top.layerout.resetTime();
	        });
	    },
	    bindEvent: function () {
	        var _this = this;

	        if (navigator.userAgent.toLowerCase().indexOf('chrome') >= 0) {
	            $('input').autocomplete = 'off';
	        }

	        _this.scrollEvent();

	        // 登录点击事件
	        $('.js-login').click(function () {
	            _f.doLogin();
	        });
	        // 注册点击事件
	        $('.js-register').click(function () {
	            window.location.href = './user-register.html';
	        });
	        // 退出点击事件
	        $('.js-logout').click(function () {
	            _user.logout(function (res) {
	                window.location.reload();
	            }, function (errMsg) {
	                _f.errorTips(errMsg);
	            });
	        });
	    },
	    scrollEvent: function () {
	        var nav = $('.wdg-fjw-second-header');
	        $(window).bind("scroll", function () {
	            var t = $(window).scrollTop();
	            if (t > 100) {
	                nav.addClass("nav-hold");
	            } else {
	                nav.removeClass("nav-hold")
	            }
	        });
	    },
	    // 加载用户信息
	    loadUserInfo: function () {

	        var $header = $('.site-nav'),
	            $isLogin = $('.F_isLogin'),
	            $unLogin = $('.F_unLogin'),
	            $userIcon = $('.F_userIcon'),
	            $userPhone = $('.F_userPhone'),
	            $logout = $('.F_out');

	        //window.localStorage.getItem('f_ui_cache')
	        if (_f.cookie.get('F.token')) {

	            var user = JSON.parse(_f.storage.getItem('f_ui_cache'));

	            var html = ['<a href="https://www.lmlc.com/web/page/login/fund/overview.html?from=home_nav" target="_blank">您好，' + user.member.phone
	                + "&nbsp;&nbsp;</a>", '<a class="F_out" href="javascript:;">退出</a>'].join("");

	            $logout.show();
	            $unLogin.hide();
	            $isLogin.html(html).show();
	            $userPhone.html(user.member.phone);
	            $userIcon.attr('src', user.member.headPhoto);

	            _f.cache.isLogin = true;
	            _f.cache.glb_user_phone = user.member.phone;
	            _f.cache.glb_user_avator = user.member.headPhoto;
	            _f.cache.glb_user_token = _f.cookie.get('F.token');

	        } else {
	            $unLogin.css({
	                visibility: 'visible'
	            });
	            $logout.hide();
	            $isLogin.hide();
	            $userPhone.html('尊敬的用户');

	            _f.cache.isLogin = false;
	            _f.cache.glb_user_token = '';
	            _f.cache.glb_user_phone = '';
	            _f.cache.glb_user_avator = '';
	        }
	    }
	};
	nav.init();
	module.exports = {
	    _f: _f,
	    _user: _user
	};

/***/ }),

/***/ 27:
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var _d = __webpack_require__(84);
	var _f = __webpack_require__(17);

	var _user = {
	    // 用户登录
	    login : function(userInfo, resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            data    : userInfo,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 检查手机号是否注册
	    checkExistPhone :function(phone,resolve,reject){
	        _f.request({
	            url     : _d.api.host,
	            data    : {
	                type    : 'phone',
	                str     : phone
	            },
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 用户注册
	    register : function(userInfo, resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            data    : userInfo,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 检查登录状态
	    checkLogin : function(){
	        if (!_f.cookie.get('F.token')) {
	           //_f.goHome();
	        }
	    },
	    // 重置密码
	    resetPassword : function(userInfo, resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            data    : userInfo,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 获取用户信息
	    getUserInfo : function(resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 更新个人信息
	    updateUserInfo : function(userInfo, resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            data    : userInfo,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 登录状态下更新密码
	    updatePassword : function(userInfo, resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            data    : userInfo,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	    },
	    // 登出
	    logout : function(resolve, reject){
	        _f.request({
	            url     : _d.api.host,
	            method  : 'POST',
	            success : resolve,
	            error   : reject
	        });
	        
	        _f.cookie.remove('F.token');
	        _f.cookie.remove('F.phone');
	        _f.cookie.remove('F.avator');

	    },
	    getUserInfo:function(){
	        
	    }
	}

	_user.checkLogin();

	module.exports = _user;


/***/ }),

/***/ 56:
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	var template = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module \"../lib/template/template.js\""); e.code = 'MODULE_NOT_FOUND'; throw e; }()))
	var _f = __webpack_require__(!(function webpackMissingModule() { var e = new Error("Cannot find module \"../lib/fjw.js\""); e.code = 'MODULE_NOT_FOUND'; throw e; }()));

	var _product = {
	    productList: function (param, resolve, reject) {
	        _f.request({
	            url: _f.config.serverHost,
	            data: param,
	            method: 'POST',
	            success: resolve,
	            error: reject
	        });
	    },
	    productDetail: function (productId, resolve, reject) {
	        _f.request({
	            url: _f.config.serverHost,
	            data: {
	                productId: productId
	            },
	            success: resolve,
	            error: reject
	        });
	    },
	    productBuyRecord: function (productId, resolve, reject) {
	        _f.request({
	            url: _f.config.serverHost,
	            data: {
	                productId: productId
	            },
	            success: resolve,
	            error: reject
	        });
	    },
	    productBuyRank: function (productId, resolve, reject) {
	        _f.request({
	            url: _f.config.serverHost,
	            data: {
	                productId: productId
	            },
	            success: resolve,
	            error: reject
	        });
	    },
	    productTypeList: function (param, resolve, reject) {
	        _f.request({
	            url: _f.config.serverHost,
	            data: {},
	            success: resolve,
	            error: reject
	        });
	    },
	}
	module.exports = {
	    template: template,
	    product: _product
	};

/***/ }),

/***/ 60:
/***/ (function(module, exports, __webpack_require__) {

	'use strict';

	__webpack_require__(61);
	var _header = __webpack_require__(26), _f = _header._f;

	var _product = __webpack_require__(56);
	var itemTpl = __webpack_require__(65);

	var page = {
	    orderByDes: {
	        1: {
	            DESC: '年化收益最多',
	            ASC: '年化收益最小',
	            DEFAULT: '年化收益'
	        },
	        2: {
	            DESC: '投资期限最长',
	            ASC: '投资期限最短',
	            DEFAULT: '投资期限'
	        }
	    },
	    param: {
	        TypeId: 0,
	        pageIndex: 1,
	        pageSize: 20,
	        ShowSellOut: '',
	        ProductState: '',
	        ProductTypeId: 0,
	        orderByType: $(".rank-default.on").data("orderby"),
	        orderBySort: $(".rank-default.on").data("sort")
	    },
	    init: function () {
	        this.onLoad();
	        this.bindEvent();
	    },
	    onLoad: function () {
	        var _this = this, main = $(".main"), idx = _f.getUrlParam("index") || 0, type = '';
	        type = idx > 0 ? 'T' : '';
	        $("#hot span", main).eq(idx).addClass("active").siblings().removeClass("active");
	        _this.getProductList(type);
	    },
	    bindEvent: function () {
	        var _this = this, main = $(".main"), type = '';

	        $("#hot span", main).click(function () {
	            var cur = $(this), idx = cur.index();
	            type = idx > 0 ? 'T' : '';
	            cur.hasClass("active") || cur.addClass("active").siblings().removeClass("active");
	            _this.getProductList(type);
	        });

	        $(".borrow-list-title a", main).click(function () {
	            debugger;

	            if ($(this).hasClass("rank-default")) {
	                $(".rank-default").removeClass("on").removeClass("up").removeClass("down");
	                $(".rank-default").each(function (idx) {
	                    var ele = $(".rank-default").eq(idx);
	                    _this.orderByDes[ele.data("orderby")] && ele.siblings().text(_this.orderByDes[ele.data("orderby")].DEFAULT)
	                })
	                if ("ASC" == $(this).data("order")) {
	                    $(this).data("sort", "1")
	                    $(this).data("order", "DESC")
	                    $(this).addClass("on").addClass("down")
	                } else if ("DESC" == $(this).data("order")) {
	                    $(this).data("order", "ASC")
	                    $(this).addClass("on").addClass("up")
	                }
	            }

	            _this.getProductList(type);
	        });
	    },
	    getProductList: function (type) {
	        var _this = this, html = '', $listCon = $(".paging-list");

	        // 这里可以先给loading
	        // $listCon.html('<div class="loading"></div>');

	        _this.param.ShowSellOut = type;

	        _product.product.productList(JSON.stringify({
	            M: _f.config.apiMethod.productList,
	            D: JSON.stringify(_this.param)
	        }), function (json) {
	            var data = JSON.parse(json);

	            // 渲染html
	            html = _product.template(itemTpl, data);
	            $listCon.html(html);

	            // 处理分页数据

	        }, function (errMsg) {
	            $listCon.html('<p class="err-tip">加载订单失败，请刷新后重试</p>');
	        });
	    }
	}

	$(function () {
	    page.init();
	});


/***/ }),

/***/ 61:
/***/ (function(module, exports) {

	// removed by extract-text-webpack-plugin

/***/ }),

/***/ 65:
/***/ (function(module, exports, __webpack_require__) {

	module.exports = "<%for(i = 0; i < grid.length; i ++) {%> <% var data = grid[i]; %> <li data-id=\"<%=data.Id%>\"> <a href=\"./detail.html?id=<%=data.Id%>\" title=\"<%=data.Title%>\" target=\"_blank\" class=\"link-detail\"></a> <dl class=\"ctn f-cb row\"> <dd class=\"f-fl name col-lg-6\"> <div class=\"tit f-nowrap\"> <%if(data.ProductTypeParentId==1){%> <i class=\"u-tag u-tag-fixed\">活期</i> <%}else if(data.ProductTypeParentId==2){%> <i class=\"u-tag u-tag-fixed\">定期</i> <%}%> <a href=\"./detail.html?id=<%=data.Id%>\" title=\"<%=data.Title%>\" target=\"_blank\"><%=data.Title%></a> </div> <div class=\"dec\"> <%if(data.ActivityType==1){%> <i class=\"u-tag u-tag-feature\">活动产品</i> <%}%> <%if(data.ProductTypeParentId==1){%> <i class=\"u-tag u-tag-feature\">天天收益</i> <%}%> <%if(data.IsPlusInCome==1){%> <i class=\"u-tag u-tag-rate\">加息</i> <%}%> <%if(data.IsCash==1){%> <i class=\"u-tag u-tag-money\">现金</i> <%}%> </div> </dd> <dd class=\"f-fl rate col-lg-3-5\"> <div class=\"tit\"> <span><%=(data.IncomeRate).toFixed(2)%>%</span> </div> <div class=\"dec\"> 预期年化收益率 </div> </dd> <dd class=\"f-fl day col-lg-3-5\"> <div class=\"tit\"> <span><%=data.TimeLimit%></span> </div> <div class=\"dec\"> 投资期限 </div> </dd> <dd class=\"f-fl money col-lg-3-5\"> <div class=\"tit\"> <%if(data.StartBuyPrice >= 10000){%> <span><%=data.StartBuyPrice/10000%>万元</span> <%}else{%> <span><%=data.StartBuyPrice%>元</span> <%}%> </div> <div class=\"dec\"> 起投金额 </div> </dd> <%if(data.ProductTypeId==3){%> <dd class=\"f-fl col-lg-3-5\"> <div class=\"tit\"> <span>充裕</span> </div> <div class=\"dec\"> 剩余份额 </div> </dd> <%}else if(data.ProductTypeId==9){%> <dd class=\"f-fl col-lg-3-5\"> <div class=\"tit\"> <%if(data.MaxBuyPrice >= 10000){%> <span><%=data.MaxBuyPrice/10000%>万元</span> <%}else{%> <span><%=data.MaxBuyPrice%>元</span> <%}%> </div> <div class=\"dec\"> 最高可购买 </div> </dd> <%}else{%> <dd class=\"f-fl process col-lg-3-5\"> <div class=\"tit\"> <p> <span class=\"process-txt\"><%=Math.floor((data.TotalShares - data.RemainingShares) / data.TotalShares * 100)%>%</span> </p> <i class=\"process-bar\"> <img style=\"width:<%=(data.TotalShares - data.RemainingShares) / data.TotalShares * 100%>%\" src=\"" + __webpack_require__(66) + "\"/> </i> </div> <div class=\"dec\"> 投资进度 </div> </dd> <%}%> <dd class=\"f-fr oper col-lg-4\"> <div class=\"timer\"></div> <%if(data.Status==3){%> <div class=\"btn\"> <span>已售罄</span> </div> <%}else{%> <div class=\"buy btn btn-primary\"> <span>立即投资</span> </div> <%}%> </dd> </dl> </li> <%}%>";

/***/ }),

/***/ 66:
/***/ (function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__.p + "imgs/process.7e2b3676.png";

/***/ }),

/***/ 84:
/***/ (function(module, exports) {

	/*
	* @Author: mr.ben(66623978) https://github.com/iNuoers/
	* @Date:   2017-08-30 16:43:17
	* @Last Modified by:   mr.ben
	* @Last Modified time: 2017-08-30 16:43:17
	*/
	'use strict';

	var debug = true;

	var api = {
	    host: debug ? 'http://192.168.1.10:8001/api' : 'https://api.fangjinnet.com:1000/api',
	    apiMethod: {
	        // 产品列表
	        productList: "ProductList",
	        // 产品详情
	        productDetail: "ProductDetail",
	        // 产品购买记录
	        productBuyRecord: "BuyRecord",
	        // 产品购买排行榜
	        productBuyRank: "ProductBuyRank",
	        // 产品类型
	        productTypeList: "GetProductTypes",

	        // 帮助类别
	        getHelpType: "GetHelpType",
	        // 帮助中心
	        helpCenterList: "HelpCenterListForPC",

	        // 我的好友
	        getFriendList: "GetFriendList"

	    }
	}

	module.exports = api

/***/ })

});